<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">

<!-- Mirrored from sambapos.org/wiki/doku.php/en/printing_coupons by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 10 Jan 2019 04:46:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8" />
    <title>Printing Coupons [SambaPOS V3]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="theme-color" content="#008800"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="en,printing_coupons"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://sambapos.org/wiki/lib/exe/opensearch.php" title="SambaPOS V3"/>
<link rel="start" href="https://sambapos.org/wiki/"/>
<link rel="contents" href="printing_couponsdecf.html?do=index" title="Sitemap"/>
<link rel="manifest" href="https://sambapos.org/wiki/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="https://sambapos.org/wiki/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="https://sambapos.org/wiki/feed.php?mode=list&amp;ns=en"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="printing_coupons47cd.html?do=export_xhtml"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="printing_couponsf7dc.txt?do=export_raw"/>
<link rel="canonical" href="printing_coupons.html"/>
<link rel="stylesheet" type="text/css" href="https://sambapos.org/wiki/lib/exe/css.php?t=dokuwiki&amp;tseed=c8874b19d6985f85f27e1d0baa627941"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='en';var JSINFO = {"plugin_aceeditor":{"default":1,"highlight":1,"wraplimit":80,"colortheme":"textmate","latex":1,"markdown":1,"mdpage":false,"xmltags":[]},"ga":{"trackingId":"UA-2397752-18","anonymizeIp":true,"action":"show","trackOutboundLinks":false,"options":[],"pageview":"\/wiki\/en\/printing_coupons"},"id":"en:printing_coupons","namespace":"en","ACT":"show","useHeadingNavigation":1,"useHeadingContent":1};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="https://sambapos.org/wiki/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="https://sambapos.org/wiki/lib/exe/js.php?t=dokuwiki&amp;tseed=c8874b19d6985f85f27e1d0baa627941&amp;lang=en"></script>
<!--<![endif]-->
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="https://sambapos.org/wiki/lib/tpl/dokuwiki/images/favicon.ico" />
<link rel="apple-touch-icon" href="../../lib/tpl/dokuwiki/images/apple-touch-icon.png" />
    </head>

<body>
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_dokuwiki    showSidebar hasSidebar">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1><a href="https://sambapos.org/wiki/doku.php/p"  accesskey="h" title="[H]"><img src="../../lib/exe/fetch.php/wiki/logo.png_%3b" width="70" height="70" alt="" /> <span>SambaPOS V3</span></a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li class="action login"><a href="printing_coupons51ef.html?do=login&amp;sectok=" title="Log In" rel="nofollow"><span>Log In</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M10 17.25V14H3v-4h7V6.75L15.25 12 10 17.25M8 2h9a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2v-4h2v4h9V4H8v4H6V4a2 2 0 0 1 2-2z"/></svg></a></li>                </ul>
            </div>
        
        <!-- SITE TOOLS -->
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="https://sambapos.org/wiki/doku.php/p" method="get" role="search" class="search doku_form" id="dw__search" accept-charset="utf-8"><input type="hidden" name="do" value="search" /><input type="hidden" name="id" value="en:printing_coupons" /><div class="no"><input name="q" type="text" class="edit" title="[F]" accesskey="f" placeholder="Search" autocomplete="on" id="qsearch__in" value="" /><button value="1" type="submit" title="Search">Search</button><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="https://sambapos.org/wiki/doku.php" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="en:printing_coupons" /><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Show pagesource</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Recent Changes</option><option value="media">Media Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="login">Log In</option></optgroup></select><button type="submit">&gt;</button></div></form>            </div>
            <ul>
                <li class="action recent"><a href="printing_coupons810b.html?do=recent" title="Recent Changes [r]" rel="nofollow" accesskey="r">Recent Changes</a></li><li class="action media"><a href="printing_couponsb4e1.html?do=media&amp;ns=en" title="Media Manager" rel="nofollow">Media Manager</a></li><li class="action index"><a href="printing_couponsdecf.html?do=index" title="Sitemap [x]" rel="nofollow" accesskey="x">Sitemap</a></li>            </ul>
        </div>

    </div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                                        <div class="trace"><span class="bchead">Trace:</span> <span class="bcsep">•</span> <bdi><a href="tips_tricks_for_new_users.html"  class="breadcrumbs" title="en:tips_tricks_for_new_users">Tips &amp; Tricks for new users.</a></bdi> <span class="bcsep">•</span> <bdi><a href="auto_rounding.html"  class="breadcrumbs" title="en:auto_rounding">Auto Rounding</a></bdi> <span class="bcsep">•</span> <bdi><a href="barcode_printing_tags.html"  class="breadcrumbs" title="en:barcode_printing_tags">Barcode Printing Tags</a></bdi> <span class="bcsep">•</span> <bdi><a href="random_number_generator_tag.html"  class="breadcrumbs" title="en:random_number_generator_tag">Random Number Generator Tags</a></bdi> <span class="bcsep">•</span> <bdi><a href="primary_field_editing_formats.html"  class="breadcrumbs" title="en:primary_field_editing_formats">Primary Field Editing Formats</a></bdi> <span class="bcsep">•</span> <bdi><a href="task_widget.html"  class="breadcrumbs" title="en:task_widget">Task Widget</a></bdi> <span class="bcsep">•</span> <bdi><a href="modify_variable_action.html"  class="breadcrumbs" title="en:modify_variable_action">Modify Variable Action</a></bdi> <span class="bcsep">•</span> <bdi><a href="preparing_sambapos_to_sell_coffee_coupons.html"  class="breadcrumbs" title="en:preparing_sambapos_to_sell_coffee_coupons">Preparing SambaPOS to Sell Coffee Coupons</a></bdi> <span class="bcsep">•</span> <bdi><a href="redeeming_coupons.html"  class="breadcrumbs" title="en:redeeming_coupons">Redeeming Coupons</a></bdi> <span class="bcsep">•</span> <span class="curid"><bdi><a href="printing_coupons.html"  class="breadcrumbs" title="en:printing_coupons">Printing Coupons</a></bdi></span></div>
                    </div>
    


    <hr class="a11y" />
</div></div><!-- /header -->

        <div class="wrapper group">

                            <!-- ********** ASIDE ********** -->
                <div id="dokuwiki__aside"><div class="pad aside include group">
                    <h3 class="toggle">Sidebar</h3>
                    <div class="content"><div class="group">
                                                Languages:
<div class="plugin_translation"><form action="https://sambapos.org/wiki/doku.php/p" id="translation__dropdown"><select name="id" class="wikilink1"><option class="wikilink1 cur" title="English" value="en/printing_coupons" selected="selected">en</option><option class="wikilink2" title="Türkçe" value="tr/printing_coupons">tr</option></select><input name="go" type="submit" value="&rarr;" /></form></div>                        
<p>
<strong>Languages:</strong>
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://sambapos.org/wiki/doku.php/tr/p" class="urlextern" title="http://sambapos.org/wiki/doku.php/tr/p" rel="nofollow">Turkish</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://sambapos.org/wiki/doku.php/p?id=en/p" class="urlextern" title="http://sambapos.org/wiki/doku.php/p?id=en/p" rel="nofollow">English</a></div>
</li>
</ul>

<p>
<strong>Links - SambaPOS V4</strong>
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://www.sambapos.com/" class="urlextern" title="http://www.sambapos.com" rel="nofollow">SambaPOS V4 WebSite</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://dorum.sambapos.org/" class="urlextern" title="http://dorum.sambapos.org" rel="nofollow">SambaPOS V4 Forum</a></div>
</li>
</ul>

<p>
<strong>Links</strong>
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://www.sambapos.org/" class="urlextern" title="http://www.sambapos.org" rel="nofollow">SambaPOS Web Site</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.sambapos.org/" class="urlextern" title="http://www.sambapos.org" rel="nofollow">Forum</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.sambapos.org/en/downloads" class="urlextern" title="http://www.sambapos.org/en/downloads" rel="nofollow">Download</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.sambapos.org/wiki" class="urlextern" title="http://www.sambapos.org/wiki" rel="nofollow">Documantation</a></div>
</li>
</ul>

<p>
<strong>Links - SambaPOS V2</strong>
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://v2.sambapos.org/" class="urlextern" title="http://v2.sambapos.org" rel="nofollow">SambaPOS V2 WebSite</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://forum2.sambapos.org/" class="urlextern" title="http://forum2.sambapos.org" rel="nofollow">Forum</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://sambapos.googlecode.com/" class="urlextern" title="http://sambapos.googlecode.com" rel="nofollow">Download</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://doc.sambapos.org/" class="urlextern" title="http://doc.sambapos.org" rel="nofollow">Dökümantasyon</a></div>
</li>
</ul>

<p>
<strong>Links - Social Media</strong>
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://www.facebook.com/sambapos" class="urlextern" title="http://www.facebook.com/sambapos" rel="nofollow">Facebook</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://www.twitter.com/sambapos" class="urlextern" title="https://www.twitter.com/sambapos" rel="nofollow">Twitter</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.youtube.com/user/sambapos" class="urlextern" title="http://www.youtube.com/user/sambapos" rel="nofollow">Youtube</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://vimeo.com/sambapos" class="urlextern" title="http://vimeo.com/sambapos" rel="nofollow">Vimeo</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.pinterest.com/sambapos" class="urlextern" title="http://www.pinterest.com/sambapos" rel="nofollow">Pinterest</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.flickr.com/photos/sambapos" class="urlextern" title="http://www.flickr.com/photos/sambapos" rel="nofollow">Flickr</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://instagram.com/sambapos" class="urlextern" title="http://instagram.com/sambapos" rel="nofollow">Instagram</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://sambapos.tumblr.com/" class="urlextern" title="http://sambapos.tumblr.com" rel="nofollow">Tumblr</a></div>
</li>
</ul>

<p>
—-
</p>
                                            </div></div>
                </div></div><!-- /aside -->
            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">
                
                <div class="pageId"><span>en:printing_coupons</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <!-- TOC START -->
<div id="dw__toc" class="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="#printing_coupons">Printing Coupons</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="#generating_multiple_coupons">Generating Multiple Coupons</a></div></li>
<li class="level2"><div class="li"><a href="#preparing_a_printer_template_for_coupons">Preparing a Printer Template for Coupons</a></div></li>
<li class="level2"><div class="li"><a href="#printing_coupons1">Printing Coupons</a></div></li>
<li class="level2"><div class="li"><a href="#saving_coupon_numbers_to_a_text_file">Saving Coupon numbers to a Text File</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="printing_coupons">Printing Coupons</h1>
<div class="level1">

<p>
If you’ve noticed every coupon sales generates a single coupon entity. If we need to generate 5 coupons we have to enter 5 different order lines. However we should be able to generate multiple coupons with a single Coupon Sale. So our first step will be improving Coupon generation for multiple Coupons. 
</p>

<p>
Selling coupons is an important business. If you have corporate connections you can sell large amounts of coupons at once with a discounted price. So coupon printing is something that should be handled nicely. We can print single coupons for personal promotions but for batch coupon generation we may need different solutions. We’ll discuss our options under this chapter. 
</p>

</div>

<h2 class="sectionedit2" id="generating_multiple_coupons">Generating Multiple Coupons</h2>
<div class="level2">

<p>
You’ll remember we’re generating coupon entities when a ticket is paid. We created this rule for this task.
</p>

<p>
<a href="../../lib/exe/detail.php/en/promotions/coupons346f2c.html?id=en%3Aprinting_coupons" class="media" title="en:promotions:coupons34.jpg"><img src="../../lib/exe/fetch.php/en/promotions/coupons34ccf3.jpg_%3b?w=700&amp;tok=202dcc" class="media" alt="" width="700" /></a>
</p>

<p>
When an order state changes to <code>Coupon Paid</code> we’re executing Coupon Creating actions. 
</p>

<p>
SambaPOS Rule System have a <code>Value Looper</code> feature that can be used to trigger multiple events. For generating multiple coupons we’ll read order quantity, pass it as a parameter to value looper and let it create multiple coupons. Let’s do it. 
</p>

<p>
First we need to create the <code>Loop Values</code> action.
</p>

<p>
<a href="../../lib/exe/detail.php/en/promotions/coupons356f2c.html?id=en%3Aprinting_coupons" class="media" title="en:promotions:coupons35.jpg"><img src="../../lib/exe/fetch.php/en/promotions/coupons35b1e4.jpg_%3b?w=700&amp;tok=ab507a" class="media" alt="" width="700" /></a>
</p>

<p>
When called Loop Values action triggers <code>Value Looped</code> event multiple times. Values parameter used to configure the loop. We can split values with comma and define ranges with brackets.
</p>
<ul>
<li class="level1"><div class="li"> If Values parameter is 100 it triggers Value Looped event once and passes 100 value to the event. </div>
</li>
<li class="level1"><div class="li"> If Values parameter is 100,150 it triggers Value Looped event two times and passes 100 and 150 values as parameters.</div>
</li>
<li class="level1"><div class="li"> If Values is (100) it triggers Value Looped event 100 times and passes each value to the event.</div>
</li>
<li class="level1"><div class="li"> If value is a range like (50-100) it works from 50 to 100. </div>
</li>
<li class="level1"><div class="li"> If value is a file path it loads lines form file and executes them one by one.</div>
</li>
</ul>

<p>
So we need to pass Quantity in brackets. To be able to generate 5 coupons <code>Values</code> Parameter should be (5). For this reason we’ll define [:Quantity] parameter in brackets. 
</p>

<p>
Now we’ll create “Value Looped” Rule.
</p>

<p>
<a href="../../lib/exe/detail.php/en/promotions/coupons366f2c.html?id=en%3Aprinting_coupons" class="media" title="en:promotions:coupons36.jpg"><img src="../../lib/exe/fetch.php/en/promotions/coupons36cf18.jpg_%3b?w=700&amp;tok=053e99" class="media" alt="" width="700" /></a>
</p>

<p>
This rule does just the same thing as <code>Create Coupon when Coupon Paid</code> rule. It creates a coupon and update it’s Menu Item name. 
</p>

<p>
On next step we’ll modify <code>Create Coupon when Coupon Paid</code> rule to trigger <code>Generate Coupons</code> action instead of generating coupons. Edit this rule, remove existing actions and add Generate Coupons action.
</p>

<p>
<a href="../../lib/exe/detail.php/en/promotions/coupons376f2c.html?id=en%3Aprinting_coupons" class="media" title="en:promotions:coupons37.jpg"><img src="../../lib/exe/fetch.php/en/promotions/coupons370728.jpg_%3b?w=700&amp;tok=48592a" class="media" alt="" width="700" /></a>
</p>

<p>
After this modification if we sell 5 Coffee Coupons on a single order line it should generate 5 coupons. 
</p>

<p>
We’ve implemented multiple coupon generation. Now we need to think about how we’ll print them. Let’s start by creating a template for printing coupons. 
</p>

</div>

<h2 class="sectionedit3" id="preparing_a_printer_template_for_coupons">Preparing a Printer Template for Coupons</h2>
<div class="level2">

<p>
Coupons are entities so we can use entity printing tags in our template. Available tags are:
</p>
<div class="table sectionedit4"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0">Tag</th><th class="col1">Description</th>
	</tr>
	</thead>
	<tr class="row1">
		<th class="col0">{ENTITY NAME}</th><td class="col1">We’ll use this tag to print coupon numbers</td>
	</tr>
	<tr class="row2">
		<th class="col0">{ENTITY BALANCE}</th><td class="col1">Prints account balance</td>
	</tr>
	<tr class="row3">
		<th class="col0">{ENTITY DATA:X}</th><td class="col1">We’ll use this tag to print custom field values</td>
	</tr>
	<tr class="row4">
		<th class="col0">{ENTITY STATE:X}</th><td class="col1">Prints entity state</td>
	</tr>
</table></div>

<p>
So a sample printer template can be something like that.
</p>

<p>
<a href="../../lib/exe/detail.php/en/promotions/coupons386f2c.html?id=en%3Aprinting_coupons" class="media" title="en:promotions:coupons38.jpg"><img src="../../lib/exe/fetch.php/en/promotions/coupons38cdaf.jpg_%3b?w=700&amp;tok=d2e510" class="media" alt="" width="700" /></a>
</p>

<p>
We’ll use this template when we need an immediate coupon print from our thermal ticket printer. &lt;QR&gt; tag is a new tag for V3 version. You can read more about <a href="barcode_printing_tags.html" class="wikilink1" title="en:barcode_printing_tags">Barcode Printing Tags</a>.
</p>

<p>
The printer template prints this coupon.
</p>

<p>
<a href="../../lib/exe/detail.php/en/promotions/coupons396f2c.html?id=en%3Aprinting_coupons" class="media" title="en:promotions:coupons39.jpg"><img src="../../lib/exe/fetch.php/en/promotions/coupons396cc8.jpg_%3b?w=700&amp;tok=4fcb00" class="media" alt="" width="700" /></a>
</p>

<p>
￼Now we need to decide when we’ll trigger this print. If you want to print it as soon as we generate the coupon we can create a <code>Print Entity</code> action and execute it as soon as we create Coupon. So let’s see how we can do it.
</p>

</div>

<h2 class="sectionedit5" id="printing_coupons1">Printing Coupons</h2>
<div class="level2">

<p>
We’ll create a <code>Print Entity</code> action.
</p>

<p>
<a href="../../lib/exe/detail.php/en/promotions/coupons406f2c.html?id=en%3Aprinting_coupons" class="media" title="en:promotions:coupons40.jpg"><img src="../../lib/exe/fetch.php/en/promotions/coupons40fed8.jpg_%3b?w=700&amp;tok=c2ba0f" class="media" alt="" width="700" /></a>
</p>

<p>
We’ll choose Printer and the Printer Template we recently created. We can pass Coupon Number so this action can load and print the entity but since we’ll execute it just after “Create Entity” action passing this parameter is not required. All entity related actions can locate new created entity when executed after “Create Entity” action. 
</p>

<p>
Now we’ll modify <code>Batch Generate Coupons</code> Rule and add this action there.
</p>

<p>
<a href="../../lib/exe/detail.php/en/promotions/coupons416f2c.html?id=en%3Aprinting_coupons" class="media" title="en:promotions:coupons41.jpg"><img src="../../lib/exe/fetch.php/en/promotions/coupons416706.jpg_%3b?w=700&amp;tok=60556f" class="media" alt="" width="700" /></a>
</p>

<p>
So when we create a new Coupon we’ll also print that.
</p>

<p>
That will work fine when we generate few coupons but on some cases we’ll need to generate large amounts of coupons for professional printing or brochures. We can also sell hundreds of coupons at once if we have business connections with large corporations. So instead of printing them we can generate a text file that contains new generated coupon codes. 
</p>

</div>

<h2 class="sectionedit6" id="saving_coupon_numbers_to_a_text_file">Saving Coupon numbers to a Text File</h2>
<div class="level2">

<p>
Our first step will be generating a file name. We’ll use <code>Update Program Setting</code> action.
</p>

<p>
<a href="../../lib/exe/detail.php/en/promotions/coupons426f2c.html?id=en%3Aprinting_coupons" class="media" title="en:promotions:coupons42.jpg"><img src="../../lib/exe/fetch.php/en/promotions/coupons4269c2.jpg_%3b?w=700&amp;tok=f67718" class="media" alt="" width="700" /></a>
</p>

<p>
File name will be a random number under Coupons folder. The {RANDOM} tag generates a string based on current date and time so we can find it easily. The file will be generated under [MY Documents]\SambaPOS3\Coupons folder. Please notice we used / character instead of \ character while defining the file path. 
</p>

<p>
This action Stores generated File Path under <code>Coupon File</code> setting so we can read it with {:Coupon File} tag. We can read all stored setting values with {:X} syntax.
</p>

<p>
We’ll execute this action just before we generate coupons so every batch coupons will stored another file. We’ll modify <code>Create Coupon when Coupon Paid</code> Rule to call this action.
</p>

<p>
<a href="../../lib/exe/detail.php/en/promotions/coupons436f2c.html?id=en%3Aprinting_coupons" class="media" title="en:promotions:coupons43.jpg"><img src="../../lib/exe/fetch.php/en/promotions/coupons430072.jpg_%3b?w=700&amp;tok=0da998" class="media" alt="" width="700" /></a>
</p>

<p>
Click <code>Select Actions</code> and add <code>Create new file name</code> action just before <code>Generate Coupons</code> action. You can change sort order of actions by dragging them on <code>Select Actions</code> window.
</p>

<p>
You’ll remember <code>Generate Coupons</code> action is a value looper that generates coupon entities. We’ll add lines to the text file in “Value Looped” event but before doing it we’ll create another action to add lines to text file.
</p>

<p>
We’ll create another action to append a line into the text file. 
</p>

<p>
<a href="../../lib/exe/detail.php/en/promotions/coupons446f2c.html?id=en%3Aprinting_coupons" class="media" title="en:promotions:coupons44.jpg"><img src="../../lib/exe/fetch.php/en/promotions/coupons446759.jpg_%3b?w=700&amp;tok=16a54d" class="media" alt="" width="700" /></a>
</p>

<p>
<code>Add Line to Text File</code> action reads stored file path with {:Coupon File} and adds a line that contains a text defined with Text parameter. We configured Text parameter as a variable so we can send coupon number to this action. 
</p>

<p>
This action is also useful to generate log files. For example you can store every logins and logouts. 
</p>

<p>
Instead of executing Coupon Printing action we’ll call this action. So let’s modify “Batch Generate Coupons” rule. 
</p>

<p>
<a href="../../lib/exe/detail.php/en/promotions/coupons456f2c.html?id=en%3Aprinting_coupons" class="media" title="en:promotions:coupons45.jpg"><img src="../../lib/exe/fetch.php/en/promotions/coupons45f02f.jpg_%3b?w=700&amp;tok=bd76cd" class="media" alt="" width="700" /></a>
</p>

<p>
We replaced <code>Print Coupon</code> action with <code>Add Coupon to File</code>. We’ll configure line format here. I want to print product name and coupon number. You can change it to add only coupon numbers. 
</p>

<p>
Now switch to POS screen and sell 50 coffee coupons and settle ticket to test if file generates correctly or not. 
</p>

<p>
<a href="../../lib/exe/detail.php/en/promotions/coupons466f2c.html?id=en%3Aprinting_coupons" class="media" title="en:promotions:coupons46.jpg"><img src="../../lib/exe/fetch.php/en/promotions/coupons46c345.jpg_%3b?w=700&amp;tok=a8393e" class="media" alt="" width="700" /></a>
</p>

<p>
I have all coupon numbers that generated on last batch in a single text file. Since we used current time as file names all new sales will generate new text file. We can use this file to print brochures, barcode tags or e-mail to customer. 
</p>

<p>
We can print coupons or store them in a text file. On next chapter we’ll see how to create Buy 6 Get 1 Free promotions. At the end of that chapter we’ll print promotion coupons immediately and when we sell coupons they’ll be stored in a text file. If you frequently sell small numbers of coupons and want to print them immediately you can switch back to immediate printing and create a specific ticket type called “Batch Coupon Sale”. So when you sell coupons through regular ticket it immediately prints coupons but when you sell through “Batch Coupon Sale” ticket it can create text file. Possibilities are endless…
</p>
<ul>
<li class="level1"><div class="li"> Back to <a href="promotion_coupons_documentation.html" class="wikilink1" title="en:promotion_coupons_documentation">Promotion Coupons Documentation</a></div>
</li>
<li class="level1"><div class="li"> Next Topic &gt; <a href="tracking_coffee_purchases_of_loyal_customers.html" class="wikilink1" title="en:tracking_coffee_purchases_of_loyal_customers">Tracking Coffee Purchases of Loyal Customers</a></div>
</li>
</ul>

</div>

                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>en/printing_coupons.txt</bdi> · Last modified: 2013/09/16 10:17 (external edit)</div>

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li class="source"><a href="printing_coupons39b4.html?do=edit" title="Show pagesource [v]" rel="nofollow" accesskey="v"><span>Show pagesource</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M13 9h5.5L13 3.5V9M6 2h8l6 6v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4c0-1.11.89-2 2-2m.12 13.5l3.74 3.74 1.42-1.41-2.33-2.33 2.33-2.33-1.42-1.41-3.74 3.74m11.16 0l-3.74-3.74-1.42 1.41 2.33 2.33-2.33 2.33 1.42 1.41 3.74-3.74z"/></svg></a></li><li class="revs"><a href="printing_coupons5f35.html?do=revisions" title="Old revisions [o]" rel="nofollow" accesskey="o"><span>Old revisions</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M11 7v5.11l4.71 2.79.79-1.28-4-2.37V7m0-5C8.97 2 5.91 3.92 4.27 6.77L2 4.5V11h6.5L5.75 8.25C6.96 5.73 9.5 4 12.5 4a7.5 7.5 0 0 1 7.5 7.5 7.5 7.5 0 0 1-7.5 7.5c-3.27 0-6.03-2.09-7.06-5h-2.1c1.1 4.03 4.77 7 9.16 7 5.24 0 9.5-4.25 9.5-9.5A9.5 9.5 0 0 0 12.5 2z"/></svg></a></li><li class="backlink"><a href="printing_coupons2271.html?do=backlink" title="Backlinks" rel="nofollow"><span>Backlinks</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M10.59 13.41c.41.39.41 1.03 0 1.42-.39.39-1.03.39-1.42 0a5.003 5.003 0 0 1 0-7.07l3.54-3.54a5.003 5.003 0 0 1 7.07 0 5.003 5.003 0 0 1 0 7.07l-1.49 1.49c.01-.82-.12-1.64-.4-2.42l.47-.48a2.982 2.982 0 0 0 0-4.24 2.982 2.982 0 0 0-4.24 0l-3.53 3.53a2.982 2.982 0 0 0 0 4.24m2.82-4.24c.39-.39 1.03-.39 1.42 0a5.003 5.003 0 0 1 0 7.07l-3.54 3.54a5.003 5.003 0 0 1-7.07 0 5.003 5.003 0 0 1 0-7.07l1.49-1.49c-.01.82.12 1.64.4 2.43l-.47.47a2.982 2.982 0 0 0 0 4.24 2.982 2.982 0 0 0 4.24 0l3.53-3.53a2.982 2.982 0 0 0 0-4.24.973.973 0 0 1 0-1.42z"/></svg></a></li><li class="top"><a href="#dokuwiki__top" title="Back to top [t]" rel="nofollow" accesskey="t"><span>Back to top</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
    <div class="license">Except where otherwise noted, content on this wiki is licensed under the following license: <bdi><a href="http://creativecommons.org/licenses/by-sa/4.0/" rel="license" class="urlextern">CC Attribution-Share Alike 4.0 International</a></bdi></div>
    <div class="buttons">
        <a href="http://creativecommons.org/licenses/by-sa/4.0/" rel="license"><img src="../../lib/images/license/button/cc-by-sa.png" alt="CC Attribution-Share Alike 4.0 International" /></a>        <a href="https://www.dokuwiki.org/donate" title="Donate" ><img
            src="../../lib/tpl/dokuwiki/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="https://php.net/" title="Powered by PHP" ><img
            src="../../lib/tpl/dokuwiki/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="../../lib/tpl/dokuwiki/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="../../lib/tpl/dokuwiki/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="https://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="../../lib/tpl/dokuwiki/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div>
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img src="https://sambapos.org/wiki/lib/exe/indexer.php?id=en%3Aprinting_coupons&amp;1547095231" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div></body>

<!-- Mirrored from sambapos.org/wiki/doku.php/en/printing_coupons by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 10 Jan 2019 04:46:40 GMT -->
</html>

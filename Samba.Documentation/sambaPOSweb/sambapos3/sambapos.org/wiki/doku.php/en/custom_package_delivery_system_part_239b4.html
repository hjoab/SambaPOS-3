<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">

<!-- Mirrored from sambapos.org/wiki/doku.php/en/custom_package_delivery_system_part_2?do=edit by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 10 Jan 2019 04:50:36 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8" />
    <title>Custom Package Delivery System Part 2 [SambaPOS V3]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="theme-color" content="#008800"/>
<meta name="robots" content="noindex,nofollow"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://sambapos.org/wiki/lib/exe/opensearch.php" title="SambaPOS V3"/>
<link rel="start" href="https://sambapos.org/wiki/"/>
<link rel="contents" href="https://sambapos.org/wiki/doku.php/en/custom_package_delivery_system_part_2?do=index" title="Sitemap"/>
<link rel="manifest" href="https://sambapos.org/wiki/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="https://sambapos.org/wiki/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="https://sambapos.org/wiki/feed.php?mode=list&amp;ns=en"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="https://sambapos.org/wiki/doku.php/en/custom_package_delivery_system_part_2?do=export_xhtml"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="https://sambapos.org/wiki/doku.php/en/custom_package_delivery_system_part_2?do=export_raw"/>
<link rel="stylesheet" type="text/css" href="https://sambapos.org/wiki/lib/exe/css.php?t=dokuwiki&amp;tseed=c8874b19d6985f85f27e1d0baa627941"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='en';var JSINFO = {"plugin_aceeditor":{"default":1,"highlight":1,"wraplimit":80,"colortheme":"textmate","latex":1,"markdown":1,"mdpage":false,"xmltags":[]},"ga":{"trackingId":"UA-2397752-18","anonymizeIp":true,"action":"edit","trackOutboundLinks":false,"options":[],"pageview":"\/wiki\/en\/custom_package_delivery_system_part_2"},"id":"en:custom_package_delivery_system_part_2","namespace":"en","ACT":"source","useHeadingNavigation":1,"useHeadingContent":1};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="https://sambapos.org/wiki/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="https://sambapos.org/wiki/lib/exe/js.php?t=dokuwiki&amp;tseed=c8874b19d6985f85f27e1d0baa627941&amp;lang=en"></script>
<script type="text/javascript" charset="utf-8" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script type="text/javascript" charset="utf-8">/*<![CDATA[*/$.noConflict();
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="https://sambapos.org/wiki/lib/plugins/aceeditor/build.js"></script>
<script type="text/javascript" charset="utf-8">/*<![CDATA[*/window.require = undefined;
/*!]]>*/</script>
<!--<![endif]-->
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="https://sambapos.org/wiki/lib/tpl/dokuwiki/images/favicon.ico" />
<link rel="apple-touch-icon" href="https://sambapos.org/wiki/lib/tpl/dokuwiki/images/apple-touch-icon.png" />
    </head>

<body>
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_source tpl_dokuwiki     hasSidebar">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1><a href="https://sambapos.org/wiki/doku.php/p"  accesskey="h" title="[H]"><img src="https://sambapos.org/wiki/lib/exe/fetch.php/wiki/logo.png" width="70" height="70" alt="" /> <span>SambaPOS V3</span></a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li class="action login"><a href="https://sambapos.org/wiki/doku.php/en/custom_package_delivery_system_part_2?do=login&amp;sectok=" title="Log In" rel="nofollow"><span>Log In</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M10 17.25V14H3v-4h7V6.75L15.25 12 10 17.25M8 2h9a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2v-4h2v4h9V4H8v4H6V4a2 2 0 0 1 2-2z"/></svg></a></li>                </ul>
            </div>
        
        <!-- SITE TOOLS -->
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="https://sambapos.org/wiki/doku.php/p" method="get" role="search" class="search doku_form" id="dw__search" accept-charset="utf-8"><input type="hidden" name="do" value="search" /><input type="hidden" name="id" value="en:custom_package_delivery_system_part_2" /><div class="no"><input name="q" type="text" class="edit" title="[F]" accesskey="f" placeholder="Search" autocomplete="on" id="qsearch__in" value="" /><button value="1" type="submit" title="Search">Search</button><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="https://sambapos.org/wiki/doku.php" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="en:custom_package_delivery_system_part_2" /><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="">Show page</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Recent Changes</option><option value="media">Media Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="login">Log In</option></optgroup></select><button type="submit">&gt;</button></div></form>            </div>
            <ul>
                <li class="action recent"><a href="https://sambapos.org/wiki/doku.php/en/custom_package_delivery_system_part_2?do=recent" title="Recent Changes [r]" rel="nofollow" accesskey="r">Recent Changes</a></li><li class="action media"><a href="https://sambapos.org/wiki/doku.php/en/custom_package_delivery_system_part_2?do=media&amp;ns=en" title="Media Manager" rel="nofollow">Media Manager</a></li><li class="action index"><a href="https://sambapos.org/wiki/doku.php/en/custom_package_delivery_system_part_2?do=index" title="Sitemap [x]" rel="nofollow" accesskey="x">Sitemap</a></li>            </ul>
        </div>

    </div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                                        <div class="trace"><span class="bchead">Trace:</span> <span class="bcsep">•</span> <bdi><a href="https://sambapos.org/wiki/doku.php/en/barcode_printing_tags"  class="breadcrumbs" title="en:barcode_printing_tags">Barcode Printing Tags</a></bdi> <span class="bcsep">•</span> <bdi><a href="https://sambapos.org/wiki/doku.php/en/random_number_generator_tag"  class="breadcrumbs" title="en:random_number_generator_tag">Random Number Generator Tags</a></bdi> <span class="bcsep">•</span> <bdi><a href="https://sambapos.org/wiki/doku.php/en/primary_field_editing_formats"  class="breadcrumbs" title="en:primary_field_editing_formats">Primary Field Editing Formats</a></bdi> <span class="bcsep">•</span> <bdi><a href="https://sambapos.org/wiki/doku.php/en/task_widget"  class="breadcrumbs" title="en:task_widget">Task Widget</a></bdi> <span class="bcsep">•</span> <bdi><a href="https://sambapos.org/wiki/doku.php/en/modify_variable_action"  class="breadcrumbs" title="en:modify_variable_action">Modify Variable Action</a></bdi> <span class="bcsep">•</span> <bdi><a href="https://sambapos.org/wiki/doku.php/en/preparing_sambapos_to_sell_coffee_coupons"  class="breadcrumbs" title="en:preparing_sambapos_to_sell_coffee_coupons">Preparing SambaPOS to Sell Coffee Coupons</a></bdi> <span class="bcsep">•</span> <bdi><a href="https://sambapos.org/wiki/doku.php/en/redeeming_coupons"  class="breadcrumbs" title="en:redeeming_coupons">Redeeming Coupons</a></bdi> <span class="bcsep">•</span> <bdi><a href="https://sambapos.org/wiki/doku.php/en/printing_coupons"  class="breadcrumbs" title="en:printing_coupons">Printing Coupons</a></bdi> <span class="bcsep">•</span> <bdi><a href="https://sambapos.org/wiki/doku.php/en/tracking_coffee_purchases_of_loyal_customers"  class="breadcrumbs" title="en:tracking_coffee_purchases_of_loyal_customers">Tracking Coffee Purchases of Loyal Customers</a></bdi> <span class="bcsep">•</span> <span class="curid"><bdi><a href="https://sambapos.org/wiki/doku.php/en/giving_free_coffee"  class="breadcrumbs" title="en:giving_free_coffee">Giving Free Coffee</a></bdi></span></div>
                    </div>
    


    <hr class="a11y" />
</div></div><!-- /header -->

        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">
                
                <div class="pageId"><span>en:custom_package_delivery_system_part_2</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    
<p>
This page is read only. You can view the source, but not change it. Ask your administrator if you think this is wrong.
</p>
    <div class="editBox" role="application">

    <div class="toolbar group">
        <div id="draft__status" class="draft__status"></div>
        <div id="tool__bar" class="tool__bar"></div>
    </div>
    <form id="dw__editform" method="post" action="#" accept-charset="utf-8"><div class="no">
<input type="hidden" name="sectok" value="" /><input type="hidden" name="id" value="en:custom_package_delivery_system_part_2" /><input type="hidden" name="rev" value="0" /><input type="hidden" name="date" value="0" /><input type="hidden" name="prefix" value="." /><input type="hidden" name="suffix" value="" /><input type="hidden" name="changecheck" value="618287ee4a9049ae5a788e4332d24976" /><input type="hidden" name="target" value="section" /><textarea name="wikitext" id="wiki__text" dir="auto" class="edit" cols="80" rows="10" tabindex="1" readonly="readonly">
====== Custom Package Delivery System Part 2 ======

&lt;wrap hi&gt;If you didn't do so reading [[http://sambapos.com/wiki/doku.php/en/custom_package_delivery_system|Part 1]] of this document is strongly recommended. If you want to continue from where Part 1 ends please download sdf file from Part 1 and upgrade to 3.0.11 (or later).&lt;/wrap&gt;

We'll contiune configuring our Custom Package Delivery System. On this tutorial we'll configure Servicing Fee by Customer Region.

We'll start by creating an Account for Servicing Fees. From this account we'll track how much servicing fee we've settled during our business. Navigate to Management &gt; Accounts and create a new Account. 

{{:en:cdps2:custom_package_delivery_system_part_2-001.jpg?700|}}

I've selected &quot;Sales Accounts&quot; as account type. If you need you can create separate account type. To make this documentation simpler I'll create single account for servicing fees but if you need you can create individual accounts for each servicing fee type.

Next, I have to configure how servicing account works. To do this I'll create a new **Account Transaction Type**. That transaction debits &quot;Servicing Fee&quot; account and credits &quot;Receviables&quot; account.

{{:en:cdps2:custom_package_delivery_system_part_2-002.jpg?700|}}

On this step we'll create a **Calculation Type**. Calculation Types are values we add to tickets such as ticket based taxes, servicing fees or other similar additions. Discounts are calculations too but they decreases ticket amounts. Since we track Servicing Fees from a single account Singe Calculation type will be enough for us.

We'll set Servicing Fee Transaction as Account Transaction type and Fixed Amount as calculation method. Since we'll update amounts dynamically from rule we can leave &quot;Amount&quot; value zero. I'll also enable &quot;Include Tax&quot; setting because we want to add this amount to ticket amount after tax calculation.

You can try different calculation methods if your servicing fee calculation is different.

{{:en:cdps2:custom_package_delivery_system_part_2-003.jpg?700|}}

We'll create an Action to update Ticket Servicing fee after a customer selected. Action Type will be &quot;Update Ticket Calculation&quot; and Calculation Type should be &quot;Servicing Fee&quot;. As you've noticed this is the calculation type we've recently created.

If I enter 5 as Amount this action will always add $5 as servicing fee but we want to determine Fee amount by Customer Region. For this reason I'll create a variable by typing [:Fee] as Amount Value. 

{{:en:cdps2:custom_package_delivery_system_part_2-004.jpg?700|}}

We'll need 4 different rules because we have 4 different regions and 4 different Servicing Fee amounts. This rule will work when we select a customer to the ticket so we'll handle &quot;Ticket Entity Changed&quot; event.

From the Conditions section we'll choose &quot;Customers&quot; as Entity Type Name because we want it to work only if the selected entity is a customer.

Second condtion will be Region check. A customer custom data contains a lot of information like Phone Number, Address and what you've added for your needs. So we need to check if that data Contains &quot;Region 1&quot; value. We can do it by changing equality operator to question mark (?).

We'll select &quot;Update Servicing Fee&quot; action we've recently created. Since we configured fee amount as a variable we can see it by expanding blue action box. Enter 3.90 there because customers from Region 1 will pay that amount.

{{:en:cdps2:custom_package_delivery_system_part_2-005.jpg?700|}}

We want this rule to work only on Delivery department. To do this switch to Mappings section and map this rule to &quot;Delivery&quot; Department and &quot;Delivery Ticket&quot; Ticket Type.

Save it when you finish that.

{{:en:cdps2:custom_package_delivery_system_part_2-006.jpg?700|}}

We have 4 regions so we'll need three more rules. You can right click &quot;Update Servicing Fee by Region 1&quot; rule from Rules List and &quot;Clone&quot; it for easier configuration. Name it, update region check and region fee. This is how rule for Region 4 configured.

{{:en:cdps2:custom_package_delivery_system_part_2-007.jpg?700|}}

When we save it we should see something like that on rules list.

{{:en:cdps2:custom_package_delivery_system_part_2-008.jpg?700|}}

This is what happens when we create a ticket for a Customer from Region 1

{{:en:cdps2:custom_package_delivery_system_part_2-009.jpg?700|}}

Even if I change the customer, servicing fee changes by region.

{{:en:cdps2:custom_package_delivery_system_part_2-010.jpg?700|}}

This is what we'll see on Accounts Screen.

{{:en:cdps2:custom_package_delivery_system_part_2-011.jpg?700|}}

Now we'll see how we can update Ticket Templates to display Servicing Fee on Bills.

I'll list Services just after Discounts.

{{:en:cdps2:custom_package_delivery_system_part_2-012.jpg?700|}}

I'll list services just af

{{:en:cdps2:custom_package_delivery_system_part_2-013.jpg?700|}}

I can configure how Services looks on printer Ticket by creating a Section for [SERVICES] at the end of the template. We'll print Calculation Template Name and Calculation Amount.

This is how it looks.

{{:en:cdps2:custom_package_delivery_system_part_2-014.jpg?600|}}

Notes:

&lt;WRAP center round tip 75%&gt;
You'll need at least V3.011 Beta version for this sample.
&lt;/WRAP&gt;


&lt;WRAP center round download 75%&gt;
Sample Database file {{:en:database:sambapos3-packages.sdf|Download it.}}
&lt;/WRAP&gt;</textarea>
<div id="wiki__editbar" class="editBar">
<div id="size__ctl">
</div>
</div>
</div></form>
</div>

                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>en/custom_package_delivery_system_part_2.txt</bdi> · Last modified: 2013/11/12 01:54 (external edit)</div>

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li class="show"><a href="https://sambapos.org/wiki/doku.php/en/custom_package_delivery_system_part_2?do=" title="Show page [v]" rel="nofollow" accesskey="v"><span>Show page</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M13 9h5.5L13 3.5V9M6 2h8l6 6v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4c0-1.11.89-2 2-2m9 16v-2H6v2h9m3-4v-2H6v2h12z"/></svg></a></li><li class="revs"><a href="https://sambapos.org/wiki/doku.php/en/custom_package_delivery_system_part_2?do=revisions" title="Old revisions [o]" rel="nofollow" accesskey="o"><span>Old revisions</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M11 7v5.11l4.71 2.79.79-1.28-4-2.37V7m0-5C8.97 2 5.91 3.92 4.27 6.77L2 4.5V11h6.5L5.75 8.25C6.96 5.73 9.5 4 12.5 4a7.5 7.5 0 0 1 7.5 7.5 7.5 7.5 0 0 1-7.5 7.5c-3.27 0-6.03-2.09-7.06-5h-2.1c1.1 4.03 4.77 7 9.16 7 5.24 0 9.5-4.25 9.5-9.5A9.5 9.5 0 0 0 12.5 2z"/></svg></a></li><li class="backlink"><a href="https://sambapos.org/wiki/doku.php/en/custom_package_delivery_system_part_2?do=backlink" title="Backlinks" rel="nofollow"><span>Backlinks</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M10.59 13.41c.41.39.41 1.03 0 1.42-.39.39-1.03.39-1.42 0a5.003 5.003 0 0 1 0-7.07l3.54-3.54a5.003 5.003 0 0 1 7.07 0 5.003 5.003 0 0 1 0 7.07l-1.49 1.49c.01-.82-.12-1.64-.4-2.42l.47-.48a2.982 2.982 0 0 0 0-4.24 2.982 2.982 0 0 0-4.24 0l-3.53 3.53a2.982 2.982 0 0 0 0 4.24m2.82-4.24c.39-.39 1.03-.39 1.42 0a5.003 5.003 0 0 1 0 7.07l-3.54 3.54a5.003 5.003 0 0 1-7.07 0 5.003 5.003 0 0 1 0-7.07l1.49-1.49c-.01.82.12 1.64.4 2.43l-.47.47a2.982 2.982 0 0 0 0 4.24 2.982 2.982 0 0 0 4.24 0l3.53-3.53a2.982 2.982 0 0 0 0-4.24.973.973 0 0 1 0-1.42z"/></svg></a></li><li class="top"><a href="#dokuwiki__top" title="Back to top [t]" rel="nofollow" accesskey="t"><span>Back to top</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
    <div class="license">Except where otherwise noted, content on this wiki is licensed under the following license: <bdi><a href="http://creativecommons.org/licenses/by-sa/4.0/" rel="license" class="urlextern">CC Attribution-Share Alike 4.0 International</a></bdi></div>
    <div class="buttons">
        <a href="http://creativecommons.org/licenses/by-sa/4.0/" rel="license"><img src="https://sambapos.org/wiki/lib/images/license/button/cc-by-sa.png" alt="CC Attribution-Share Alike 4.0 International" /></a>        <a href="https://www.dokuwiki.org/donate" title="Donate" ><img
            src="https://sambapos.org/wiki/lib/tpl/dokuwiki/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="https://php.net/" title="Powered by PHP" ><img
            src="https://sambapos.org/wiki/lib/tpl/dokuwiki/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="https://sambapos.org/wiki/lib/tpl/dokuwiki/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="https://sambapos.org/wiki/lib/tpl/dokuwiki/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="https://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="https://sambapos.org/wiki/lib/tpl/dokuwiki/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div>
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img src="https://sambapos.org/wiki/lib/exe/indexer.php?id=en%3Acustom_package_delivery_system_part_2&amp;1547095409" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div></body>

<!-- Mirrored from sambapos.org/wiki/doku.php/en/custom_package_delivery_system_part_2?do=edit by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 10 Jan 2019 04:50:36 GMT -->
</html>

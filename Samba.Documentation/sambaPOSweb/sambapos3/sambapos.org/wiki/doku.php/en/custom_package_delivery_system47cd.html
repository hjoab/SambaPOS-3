<!DOCTYPE html>
<html lang="en" dir="ltr">

<!-- Mirrored from sambapos.org/wiki/doku.php/en/custom_package_delivery_system?do=export_xhtml by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 10 Jan 2019 04:49:58 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
  <meta charset="utf-8" />
  <title>en:custom_package_delivery_system</title>
<meta name="generator" content="DokuWiki"/>
<meta name="theme-color" content="#008800"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="en,custom_package_delivery_system"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://sambapos.org/wiki/lib/exe/opensearch.php" title="SambaPOS V3"/>
<link rel="start" href="https://sambapos.org/wiki/"/>
<link rel="contents" href="custom_package_delivery_systemdecf.html?do=index" title="Sitemap"/>
<link rel="manifest" href="https://sambapos.org/wiki/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="https://sambapos.org/wiki/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="https://sambapos.org/wiki/feed.php?mode=list&amp;ns=en"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="custom_package_delivery_system47cd.html?do=export_xhtml"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="custom_package_delivery_systemf7dc.txt?do=export_raw"/>
<link rel="canonical" href="custom_package_delivery_system.html"/>
<link rel="stylesheet" type="text/css" href="https://sambapos.org/wiki/lib/exe/css.php?t=dokuwiki&amp;tseed=c8874b19d6985f85f27e1d0baa627941"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='en';var JSINFO = {"plugin_aceeditor":{"default":1,"highlight":1,"wraplimit":80,"colortheme":"textmate","latex":1,"markdown":1,"mdpage":false,"xmltags":[]},"ga":{"trackingId":"UA-2397752-18","anonymizeIp":true,"action":"export_xhtml","trackOutboundLinks":false,"options":[],"pageview":"\/wiki\/en\/custom_package_delivery_system"},"id":"en:custom_package_delivery_system","namespace":"en","ACT":"export_xhtml","useHeadingNavigation":1,"useHeadingContent":1};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="https://sambapos.org/wiki/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="https://sambapos.org/wiki/lib/exe/js.php?t=dokuwiki&amp;tseed=c8874b19d6985f85f27e1d0baa627941&amp;lang=en"></script>
<!--<![endif]-->
</head>
<body>
<div class="dokuwiki export">

<h1 class="sectionedit1" id="custom_package_delivery_system">Custom Package Delivery System</h1>
<div class="level1">

<p>
This documentation is about creating a custom package delivery screen configuration. Before start reading this long document I highly reccomend you watching usage video of this sample to better understanding what is it about. <a href="http://youtu.be/ljXkrkhuz3g" class="urlextern" title="http://youtu.be/ljXkrkhuz3g" rel="nofollow">http://youtu.be/ljXkrkhuz3g</a> . Video is in Turkish Language but you can enable English Subtitles.
</p>

<p>
SambaPOS have lots of features for running your package delivery business. With V3 you can even do more by using automation features and custom screen widget. This sample will demonstate:
</p>
<ol>
<li class="level1"><div class="li"> Receving orders by using Caller Id module.</div>
</li>
<li class="level1"><div class="li"> New orders will receive “Waiting Status” and listed on a table.</div>
</li>
<li class="level1"><div class="li"> We&#039;ll display orders by customer regions.</div>
</li>
<li class="level1"><div class="li"> We can multi select waiting orders and assign them to a delivery personnel with a single click.</div>
</li>
<li class="level1"><div class="li"> Listing tickets by Deliverers and settling them.</div>
</li>
</ol>

<p>
We&#039;ll start by creating a new Entity Type for deliverers. We&#039;ll have two custom fields for personnel phone and address. You can add more for your needs by right clicking on the grid. Creating a Deliverer Entity Type means we can create Deliverers and assign them to tickets like we assign customers or tables.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-001a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-001.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-001d768.jpg_%3b?w=700&amp;tok=eda57d" class="media" alt="" width="700" /></a>
</p>

<p>
While creating delivery personnel records we can update custom fields.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-002a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-002.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-0028b1f.jpg_%3b?w=700&amp;tok=a41ddf" class="media" alt="" width="700" /></a>
</p>

<p>
We&#039;ll need different ticket type for delivery department. We&#039;ll use same menu for delivery and table service departments but you can create different menu with different prices for delivery department if you need. The main reason we need different ticket type is we can differ delivery sales on reports and make finer configuration. While creating this ticket type we&#039;ll assign “Customers” and “Deliverers” entity types to this ticket type. This also means we won&#039;t use tables with these tickets. Not in the scope of this document but as a side note you can create custom Transaction Type for this ticket type and differ delivery sales accounts. We&#039;ll talk about this more on further documents.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-003a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-003.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-00305b5.jpg_%3b?w=700&amp;tok=3f3081" class="media" alt="" width="700" /></a>
</p>

<p>
On this step we&#039;ll create Delivery Department. We&#039;ll choose “Delivery Ticket” as Ticket type so tickets created from Delivery department will use this ticket type.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-004a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-004.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-0043b63.jpg_%3b?w=700&amp;tok=cc121d" class="media" alt="" width="700" /></a>
</p>

<p>
We&#039;ll create a Entity Screen for Delivery department. We&#039;ll use two screens for this department. One of them is selecting Customers and the other one is for managing orders. We&#039;ll create customer selection screen first. View mode of this screen is “Search” so instead of clicking buttons we&#039;ll find customers by typing their name or phone number.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-005a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-005.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-0056ab8.jpg_%3b?w=700&amp;tok=d4955b" class="media" alt="" width="700" /></a>
</p>

<p>
On the Entity List page we&#039;ll choose Entity Type of this screen. Since we select Customers here that means we&#039;ll find Customers through this screen.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-006a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-006.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-0060a0b.jpg_%3b?w=700&amp;tok=593f2e" class="media" alt="" width="700" /></a>
</p>

<p>
Finally we&#039;ll map this screen to Delivery department. That means this screen is visible only for Delivery department. On default configuration Table selection screen is visible to all (*) departments. Since we don&#039;t need table selection on Delivery department you can open “All Tables” screen and map it to “Restaurant” department.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-007a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-007.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-00757e7.jpg_%3b?w=700&amp;tok=59616a" class="media" alt="" width="700" /></a>
</p>

<p>
 Second Entity Screen is the custom delivery screen we&#039;ll configure. We&#039;ll add widgets and buttons on this screen like we configure a custom table screen so View Mode should be “Custom”
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-008a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-008.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-008efe6.jpg_%3b?w=700&amp;tok=89aaef" class="media" alt="" width="700" /></a>
</p>

<p>
On the Entity List Page we&#039;ll select Entity Type as “Deliverers”. That means we&#039;ll work with deliverers on this screen. Add previously created delivery personnel to the list and set Display State to “Status” so you can use Resource Grid widget on this screen.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-009a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-009.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-00987a5.jpg_%3b?w=700&amp;tok=aeccec" class="media" alt="" width="700" /></a>
</p>

<p>
Map it to Delivery department and select Ticket Type as shown here.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-010a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-010.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-0105330.jpg_%3b?w=700&amp;tok=da9119" class="media" alt="" width="700" /></a>
</p>

<p>
When we click “Delivery” department button on the bottom we should see two buttons for two screen we recently created. If you see more screens here it means these screens mapped to all (*) departmens. You can remove them from display by mapping these unneded screens to Restaurant department.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-011a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-011.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-011430e.jpg_%3b?w=700&amp;tok=94191a" class="media" alt="" width="700" /></a>
</p>

<p>
We&#039;ll need some rules and actions in order to update states of delivery tickets properly. We&#039;ll start by creating an action for updating Delivery Status of the ticket.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-012a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-012.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-012e442.jpg_%3b?w=700&amp;tok=e398e0" class="media" alt="" width="700" /></a>
</p>

<p>
This rule executes “Update Delivery Ticket Status” action with “Waiting” value as soon as a Ticket first Created. That means when we create a ticket it&#039;s delivery state becomes “Waiting”
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-013a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-013.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-0132f4f.jpg_%3b?w=700&amp;tok=a7b64c" class="media" alt="" width="700" /></a>
</p>

<p>
We&#039;ll map this rule to delivery department and delivery ticket. So this rule becomes only active for delivery tickets. I won&#039;t show this step for every rules we&#039;ll create. Please map all further rules to Delivery Department and Delivery Ticket as shown here.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-014a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-014.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-01475a6.jpg_%3b?w=700&amp;tok=f64114" class="media" alt="" width="700" /></a>
</p>

<p>
We need another rule to change Ticket Delivery Status to “Delivering” when we assing a Deliverer to Ticket. This rule activates when Ticket Entity Changes and if Entity Type Name equals Deliverers it changes ticket state to “Delivering”. You can add more actions here. For example you can print “Delivery Ticket” with deliverer name and customer address.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-015a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-015.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-01523c4.jpg_%3b?w=700&amp;tok=0b90ab" class="media" alt="" width="700" /></a>
</p>

<p>
We&#039;ll create another rule to change Ticket Delivery state to “Delivered” when we settle the ticket.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-046a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-046.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-0468f57.jpg_%3b?w=700&amp;tok=d1c786" class="media" alt="" width="700" /></a>
</p>

<p>
I&#039;m not showing these steps but don&#039;t forget mapping these rules to delivery department and delivery ticket.
</p>

<p>
We finished configuring rules for ticket state tracking. Now we&#039;ll start desiging Custom Delivery Screen. Switch to delivery screen and enable “design mode” by right clicking on the screen.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-016a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-016.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-016f00d.jpg_%3b?w=700&amp;tok=a0ca66" class="media" alt="" width="700" /></a>
</p>

<p>
We&#039;ll add Resource Search widget.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-017a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-017.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-0177e24.jpg_%3b?w=700&amp;tok=bb3cff" class="media" alt="" width="700" /></a>
</p>

<p>
Move this widget to the right bottom corner of the screen and resize it to the top. It is the easiest way to position widgets. This widget looks like our customer search screens. Since the Entity Type of this screen is “Deliverers” widget automatically configured itself to search deliverer entities.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-018a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-018.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-0181ea3.jpg_%3b?w=700&amp;tok=4cdabf" class="media" alt="" width="700" /></a>
</p>

<p>
Right click on the widget and click “Settings” We&#039;ll configure this widget as displayed here.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-019a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-019.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-01977ba.jpg_%3b?w=500&amp;tok=2568de" class="media" alt="" width="500" /></a>
</p>

<p>
On this step add two Ticket Lister widgets to the screen and position them as displayed here. Ticket Lister is a special widget to list tickets filtered by it&#039;s state. Ticket Lister 1 will display “Waiting” tickets and Ticket Lister 2 wil display “Delivering” tickets.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-020a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-020.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-0201190.jpg_%3b?w=700&amp;tok=ed7b52" class="media" alt="" width="700" /></a>
</p>

<p>
This is the settings screen of Ticket Lister 1. State is Waiting so it will display tickets with “Waiting” state. Format setting is for configuring how ticket displays on the lister. We use “Printer Template” formatting here. Most printer formatting features supported here. So you can configure how tickets displayed like you configure ticket prints. {ENTITY DATA:Customer:Region} will display Customers Region. We&#039;ll configure this field on next step.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-021a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-021.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-02139bf.jpg_%3b?w=600&amp;tok=8ec36c" class="media" alt="" width="600" /></a>
</p>

<p>
Ticket Lister 2 displays tickets with Delivering state. Display format is a little different here. We display Deliverer name here.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-022a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-022.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-022146c.jpg_%3b?w=600&amp;tok=6756a1" class="media" alt="" width="600" /></a>
</p>

<p>
Now we&#039;ll create “Region” field for Customers. Go to Management &gt; Entity Types &gt; Customers and edit “Customers” entity type. You can add Region field by right clicking on the grid. I&#039;ve also entered possible region values here by splitting them with commas.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-023a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-023.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-0230a7a.jpg_%3b?w=700&amp;tok=6902db" class="media" alt="" width="700" /></a>
</p>

<p>
Switch to “Delivery Customers” screen and create a new customer. As you can see I can choose a region from combobox while creating a customer. We forgot adding an address field here but it will be useful if you add it too :) Click Select Customer to create an order.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-024a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-024.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-0248a7c.jpg_%3b?w=700&amp;tok=5eaf1b" class="media" alt="" width="700" /></a>
</p>

<p>
When we create an order we can see how Customer displayed on the title and the delivery status of the ticket.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-025a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-025.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-025dcaa.jpg_%3b?w=700&amp;tok=476790" class="media" alt="" width="700" /></a>
</p>

<p>
When we close this ticket it should appear on ticket lister 1.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-026a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-026.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-026cacb.jpg_%3b?w=700&amp;tok=74986f" class="media" alt="" width="700" /></a>
</p>

<p>
On this step we&#039;ll create some actions and rules for configuring our custom screen. We are expecting to choose tickets from Ticket Lister 1 and assign them to a delivery personnel with a single command button click. Let&#039;s start creating needed actions.
</p>

<p>
First we need to store selected Ticket Id&#039;s in program memory. This technique is useful to pass values from one widget to another. Ticket lister 1 write selected ticket ids to a program setting and when another widget needs to know which tickets are selected it will read it from this program setting.
</p>

<p>
Create a new action, select “update program setting” action type and configure it as shown here. The setting name we are using here is “TicketIds” when we need to read selected ticket ids we&#039;ll use {:TicketIds} tag.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-027a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-027.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-0273153.jpg_%3b?w=700&amp;tok=0a85a1" class="media" alt="" width="700" /></a>
</p>

<p>
We&#039;ll need an autmation command to trigger needed rules when we click on a ticket from ticket lister 1.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-028a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-028.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-028e5ff.jpg_%3b?w=700&amp;tok=9b43a4" class="media" alt="" width="700" /></a>
</p>

<p>
Create a new rule and when this automation command triggers we&#039;ll execute “Store Selected Ticket Ids” action.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-029a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-029.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-0292497.jpg_%3b?w=700&amp;tok=6aa947" class="media" alt="" width="700" /></a>
</p>

<p>
This awesome action does looping actions. It reads a value and executes “Value Looped” rule multiple times with supplied values. On this sample it reads selected Tickets Ids from {:TicketIds} tag. When we write a value in curly brackets it reads it&#039;s value from program settings. If you remember we stored selected ticket id&#039;s to TicketIds setting with “Store Selected Ticket Ids” action. It will read this setting, for example if stored ids are 101,105,109 it will split these values to three and loop these values. In this case three times.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-030a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-030.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-03073f6.jpg_%3b?w=700&amp;tok=9f16a0" class="media" alt="" width="700" /></a>
</p>

<p>
We need another action to change ticket deliverer. This action does it. Please notice this rule also reads selected deliverer name from program settings with {:Deliverer} setting name. We&#039;ll store selected deliverer name when we click Deliverer button.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-031a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-031.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-031b23b.jpg_%3b?w=700&amp;tok=499b41" class="media" alt="" width="700" /></a>
</p>

<p>
This action Loads a ticket and keeps it in memory. It is useful to use ticket related actions. For example change ticket entity action we&#039;ll use to change ticket deliverer needs an active ticket. Since there is no ticket loaded we have to load it with this action. We&#039;ll send “Ticket Id” parameter from next rule we&#039;ll create so we&#039;ll configure it as variable by typing it in square brackets.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-032a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-032.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-03272bb.jpg_%3b?w=700&amp;tok=269d18" class="media" alt="" width="700" /></a>
</p>

<p>
This rule is the place where all pieces used together. Like I&#039;ve mentioned before “value looper” action executes “Value Looped” rule multiple times. For example if we choose 4 tickets on ticket lister 1, this rule will execute four times and on each step it will send next Ticket Id with Value parameter.
</p>

<p>
It will first load a ticket with Load Ticket action. We pass ticket id with value parameter. On next step it will change ticket&#039;s deliverer. If you remember this action reads selected deliverer from “{:Deliverer}” program setting. On the last step it closes (saves) ticket.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-033a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-033.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-033cb24.jpg_%3b?w=700&amp;tok=2f7127" class="media" alt="" width="700" /></a>
</p>

<p>
To be able to trigger value looper action we need to configure an automation command and map it to the deliverer button widget. Create a new automation command and configure it as shown here.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-034a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-034.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-034df88.jpg_%3b?w=700&amp;tok=ea522b" class="media" alt="" width="700" /></a>
</p>

<p>
We&#039;ll create a rule to handle this automation command. When a deliverer selected we&#039;ll store deliverer name in memory and start looping stored ticket ids.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-035a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-035.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-0354fa8.jpg_%3b?w=700&amp;tok=8f0ff4" class="media" alt="" width="700" /></a>
</p>

<p>
When we click on a ticket on Ticket Lister 2 we want to display this ticket. We&#039;ll handle it with Display Selected Ticket automation command. Create is as shown here. Since we call these automation commands from widgets there is no need to map these commands to buttons.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-036a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-036.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-036d4ea.jpg_%3b?w=700&amp;tok=7aec68" class="media" alt="" width="700" /></a>
</p>

<p>
This action displays a ticket.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-037a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-037.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-0378dad.jpg_%3b?w=700&amp;tok=585002" class="media" alt="" width="700" /></a>
</p>

<p>
This rule handles Display Selected Ticket automation command and execute Display Ticket action. We&#039;ll map Display Ticket parameter to [:Value] too.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-044a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-044.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-0447c09.jpg_%3b?w=700&amp;tok=44f3bc" class="media" alt="" width="700" /></a>
</p>

<p>
All required actions and rules are created. Now will map these rules to widgets. Enable Design Mode on delivery screen and open Ticket Lister 1 Settings.
</p>

<p>
We&#039;ll enable “Multi Selection” setting and Map it to “Ticket Selected on Ticket Lister” command.
</p>

<p>
When we click on a tickets there widget calls Ticket Selected on Ticket Lister command and passes Selected Ticket Ids as comma separated values. If you need to use different values you can use Command Value setting here.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-039a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-039.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-039d4c9.jpg_%3b?w=600&amp;tok=5a5c05" class="media" alt="" width="600" /></a>
</p>

<p>
Now we&#039;ll start adding Automation Command Button widgets for each deliverer personnel and configure them as shown here. This button calls Deliverer Selected command and passes John D. as Value parameter.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-040a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-040.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-0406830.jpg_%3b?w=700&amp;tok=9fbca2" class="media" alt="" width="700" /></a>
</p>

<p>
We&#039;ll set Ticket Lister 2 Command Name to Display Selected Ticket. While executing this command it also passes Selected Ticket Id as value parameter.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-045a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-045.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-045aeb2.jpg_%3b?w=700&amp;tok=1328ca" class="media" alt="" width="700" /></a>
</p>

<p>
That&#039;s all. We&#039;ve created a useful delivery screen and configured it for our business needs.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps/custom_package_delivery_system-042a6e4.html?id=en%3Acustom_package_delivery_system" class="media" title="en:cdps:custom_package_delivery_system-042.jpg"><img src="../../lib/exe/fetch.php/en/cdps/custom_package_delivery_system-04234a4.jpg_%3b?w=700&amp;tok=710064" class="media" alt="" width="700" /></a>
</p>

<p>
It should work as shown at the sample video. Let us know your results.
</p>

<p>
Thanks.
</p>

<p>
By clicking the link below you can download sample sdf file for this configuration.
</p>

<p>
Continue Reading: Custom Package Delivery System Part 2
</p>

<p>
Notes:
</p>
<!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;secid&quot;:2,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_center wrap_round wrap_tip plugin_wrap" style="width: 75%;">
<p>
You&#039;ll need at least V3.06 Beta version for this sample.
</p>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;secid&quot;:3,&quot;range&quot;:&quot;0-&quot;} --><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;secid&quot;:4,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_center wrap_round wrap_download plugin_wrap" style="width: 75%;">
<p>
Sample Database file<a href="https://sambapos.org/wiki/lib/exe/fetch.php/tr/database/sambapos3033_delivery2.sdf" class="media mediafile mf_sdf" title="tr:database:sambapos3033_delivery2.sdf (2.1 MB)">Download for SambaPOS V3.033</a>
</p>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;secid&quot;:5,&quot;range&quot;:&quot;0-&quot;} -->
</div>
</div>
</body>

<!-- Mirrored from sambapos.org/wiki/doku.php/en/custom_package_delivery_system?do=export_xhtml by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 10 Jan 2019 04:49:58 GMT -->
</html>

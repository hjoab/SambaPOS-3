<!DOCTYPE html>
<html lang="en" dir="ltr">

<!-- Mirrored from sambapos.org/wiki/doku.php/en/custom_package_delivery_system_part_2?do=export_xhtml by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 10 Jan 2019 04:50:27 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
  <meta charset="utf-8" />
  <title>en:custom_package_delivery_system_part_2</title>
<meta name="generator" content="DokuWiki"/>
<meta name="theme-color" content="#008800"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="en,custom_package_delivery_system_part_2"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://sambapos.org/wiki/lib/exe/opensearch.php" title="SambaPOS V3"/>
<link rel="start" href="https://sambapos.org/wiki/"/>
<link rel="contents" href="custom_package_delivery_system_part_2decf.html?do=index" title="Sitemap"/>
<link rel="manifest" href="https://sambapos.org/wiki/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="https://sambapos.org/wiki/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="https://sambapos.org/wiki/feed.php?mode=list&amp;ns=en"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="custom_package_delivery_system_part_247cd.html?do=export_xhtml"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="custom_package_delivery_system_part_2f7dc.txt?do=export_raw"/>
<link rel="canonical" href="custom_package_delivery_system_part_2.html"/>
<link rel="stylesheet" type="text/css" href="https://sambapos.org/wiki/lib/exe/css.php?t=dokuwiki&amp;tseed=c8874b19d6985f85f27e1d0baa627941"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='en';var JSINFO = {"plugin_aceeditor":{"default":1,"highlight":1,"wraplimit":80,"colortheme":"textmate","latex":1,"markdown":1,"mdpage":false,"xmltags":[]},"ga":{"trackingId":"UA-2397752-18","anonymizeIp":true,"action":"export_xhtml","trackOutboundLinks":false,"options":[],"pageview":"\/wiki\/en\/custom_package_delivery_system_part_2"},"id":"en:custom_package_delivery_system_part_2","namespace":"en","ACT":"export_xhtml","useHeadingNavigation":1,"useHeadingContent":1};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="https://sambapos.org/wiki/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="https://sambapos.org/wiki/lib/exe/js.php?t=dokuwiki&amp;tseed=c8874b19d6985f85f27e1d0baa627941&amp;lang=en"></script>
<!--<![endif]-->
</head>
<body>
<div class="dokuwiki export">

<h1 class="sectionedit1" id="custom_package_delivery_system_part_2">Custom Package Delivery System Part 2</h1>
<div class="level1">

<p>
<span class="wrap_hi ">If you didn&#039;t do so reading <a href="http://sambapos.com/wiki/doku.php/en/custom_package_delivery_system" class="urlextern" title="http://sambapos.com/wiki/doku.php/en/custom_package_delivery_system" rel="nofollow">Part 1</a> of this document is strongly recommended. If you want to continue from where Part 1 ends please download sdf file from Part 1 and upgrade to 3.0.11 (or later).</span>
</p>

<p>
We&#039;ll contiune configuring our Custom Package Delivery System. On this tutorial we&#039;ll configure Servicing Fee by Customer Region.
</p>

<p>
We&#039;ll start by creating an Account for Servicing Fees. From this account we&#039;ll track how much servicing fee we&#039;ve settled during our business. Navigate to Management &gt; Accounts and create a new Account. 
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps2/custom_package_delivery_system_part_2-00108d8.html?id=en%3Acustom_package_delivery_system_part_2" class="media" title="en:cdps2:custom_package_delivery_system_part_2-001.jpg"><img src="../../lib/exe/fetch.php/en/cdps2/custom_package_delivery_system_part_2-0011217.jpg_%3b?w=700&amp;tok=dacaa1" class="media" alt="" width="700" /></a>
</p>

<p>
I&#039;ve selected “Sales Accounts” as account type. If you need you can create separate account type. To make this documentation simpler I&#039;ll create single account for servicing fees but if you need you can create individual accounts for each servicing fee type.
</p>

<p>
Next, I have to configure how servicing account works. To do this I&#039;ll create a new <strong>Account Transaction Type</strong>. That transaction debits “Servicing Fee” account and credits “Receviables” account.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps2/custom_package_delivery_system_part_2-00208d8.html?id=en%3Acustom_package_delivery_system_part_2" class="media" title="en:cdps2:custom_package_delivery_system_part_2-002.jpg"><img src="../../lib/exe/fetch.php/en/cdps2/custom_package_delivery_system_part_2-002445b.jpg_%3b?w=700&amp;tok=ea327a" class="media" alt="" width="700" /></a>
</p>

<p>
On this step we&#039;ll create a <strong>Calculation Type</strong>. Calculation Types are values we add to tickets such as ticket based taxes, servicing fees or other similar additions. Discounts are calculations too but they decreases ticket amounts. Since we track Servicing Fees from a single account Singe Calculation type will be enough for us.
</p>

<p>
We&#039;ll set Servicing Fee Transaction as Account Transaction type and Fixed Amount as calculation method. Since we&#039;ll update amounts dynamically from rule we can leave “Amount” value zero. I&#039;ll also enable “Include Tax” setting because we want to add this amount to ticket amount after tax calculation.
</p>

<p>
You can try different calculation methods if your servicing fee calculation is different.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps2/custom_package_delivery_system_part_2-00308d8.html?id=en%3Acustom_package_delivery_system_part_2" class="media" title="en:cdps2:custom_package_delivery_system_part_2-003.jpg"><img src="../../lib/exe/fetch.php/en/cdps2/custom_package_delivery_system_part_2-00377e6.jpg_%3b?w=700&amp;tok=112d21" class="media" alt="" width="700" /></a>
</p>

<p>
We&#039;ll create an Action to update Ticket Servicing fee after a customer selected. Action Type will be “Update Ticket Calculation” and Calculation Type should be “Servicing Fee”. As you&#039;ve noticed this is the calculation type we&#039;ve recently created.
</p>

<p>
If I enter 5 as Amount this action will always add $5 as servicing fee but we want to determine Fee amount by Customer Region. For this reason I&#039;ll create a variable by typing [:Fee] as Amount Value. 
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps2/custom_package_delivery_system_part_2-00408d8.html?id=en%3Acustom_package_delivery_system_part_2" class="media" title="en:cdps2:custom_package_delivery_system_part_2-004.jpg"><img src="../../lib/exe/fetch.php/en/cdps2/custom_package_delivery_system_part_2-0044101.jpg_%3b?w=700&amp;tok=00f5c2" class="media" alt="" width="700" /></a>
</p>

<p>
We&#039;ll need 4 different rules because we have 4 different regions and 4 different Servicing Fee amounts. This rule will work when we select a customer to the ticket so we&#039;ll handle “Ticket Entity Changed” event.
</p>

<p>
From the Conditions section we&#039;ll choose “Customers” as Entity Type Name because we want it to work only if the selected entity is a customer.
</p>

<p>
Second condtion will be Region check. A customer custom data contains a lot of information like Phone Number, Address and what you&#039;ve added for your needs. So we need to check if that data Contains “Region 1” value. We can do it by changing equality operator to question mark (?).
</p>

<p>
We&#039;ll select “Update Servicing Fee” action we&#039;ve recently created. Since we configured fee amount as a variable we can see it by expanding blue action box. Enter 3.90 there because customers from Region 1 will pay that amount.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps2/custom_package_delivery_system_part_2-00508d8.html?id=en%3Acustom_package_delivery_system_part_2" class="media" title="en:cdps2:custom_package_delivery_system_part_2-005.jpg"><img src="../../lib/exe/fetch.php/en/cdps2/custom_package_delivery_system_part_2-005a905.jpg_%3b?w=700&amp;tok=d83c84" class="media" alt="" width="700" /></a>
</p>

<p>
We want this rule to work only on Delivery department. To do this switch to Mappings section and map this rule to “Delivery” Department and “Delivery Ticket” Ticket Type.
</p>

<p>
Save it when you finish that.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps2/custom_package_delivery_system_part_2-00608d8.html?id=en%3Acustom_package_delivery_system_part_2" class="media" title="en:cdps2:custom_package_delivery_system_part_2-006.jpg"><img src="../../lib/exe/fetch.php/en/cdps2/custom_package_delivery_system_part_2-006be6b.jpg_%3b?w=700&amp;tok=71f389" class="media" alt="" width="700" /></a>
</p>

<p>
We have 4 regions so we&#039;ll need three more rules. You can right click “Update Servicing Fee by Region 1” rule from Rules List and “Clone” it for easier configuration. Name it, update region check and region fee. This is how rule for Region 4 configured.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps2/custom_package_delivery_system_part_2-00708d8.html?id=en%3Acustom_package_delivery_system_part_2" class="media" title="en:cdps2:custom_package_delivery_system_part_2-007.jpg"><img src="../../lib/exe/fetch.php/en/cdps2/custom_package_delivery_system_part_2-007343a.jpg_%3b?w=700&amp;tok=8e711f" class="media" alt="" width="700" /></a>
</p>

<p>
When we save it we should see something like that on rules list.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps2/custom_package_delivery_system_part_2-00808d8.html?id=en%3Acustom_package_delivery_system_part_2" class="media" title="en:cdps2:custom_package_delivery_system_part_2-008.jpg"><img src="../../lib/exe/fetch.php/en/cdps2/custom_package_delivery_system_part_2-008d1e3.jpg_%3b?w=700&amp;tok=b2dc2d" class="media" alt="" width="700" /></a>
</p>

<p>
This is what happens when we create a ticket for a Customer from Region 1
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps2/custom_package_delivery_system_part_2-00908d8.html?id=en%3Acustom_package_delivery_system_part_2" class="media" title="en:cdps2:custom_package_delivery_system_part_2-009.jpg"><img src="../../lib/exe/fetch.php/en/cdps2/custom_package_delivery_system_part_2-009e967.jpg_%3b?w=700&amp;tok=bd213b" class="media" alt="" width="700" /></a>
</p>

<p>
Even if I change the customer, servicing fee changes by region.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps2/custom_package_delivery_system_part_2-01008d8.html?id=en%3Acustom_package_delivery_system_part_2" class="media" title="en:cdps2:custom_package_delivery_system_part_2-010.jpg"><img src="../../lib/exe/fetch.php/en/cdps2/custom_package_delivery_system_part_2-010a42f.jpg_%3b?w=700&amp;tok=3b589e" class="media" alt="" width="700" /></a>
</p>

<p>
This is what we&#039;ll see on Accounts Screen.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps2/custom_package_delivery_system_part_2-01108d8.html?id=en%3Acustom_package_delivery_system_part_2" class="media" title="en:cdps2:custom_package_delivery_system_part_2-011.jpg"><img src="../../lib/exe/fetch.php/en/cdps2/custom_package_delivery_system_part_2-0114556.jpg_%3b?w=700&amp;tok=4a5559" class="media" alt="" width="700" /></a>
</p>

<p>
Now we&#039;ll see how we can update Ticket Templates to display Servicing Fee on Bills.
</p>

<p>
I&#039;ll list Services just after Discounts.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps2/custom_package_delivery_system_part_2-01208d8.html?id=en%3Acustom_package_delivery_system_part_2" class="media" title="en:cdps2:custom_package_delivery_system_part_2-012.jpg"><img src="../../lib/exe/fetch.php/en/cdps2/custom_package_delivery_system_part_2-0127b8a.jpg_%3b?w=700&amp;tok=fd7326" class="media" alt="" width="700" /></a>
</p>

<p>
I&#039;ll list services just af
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps2/custom_package_delivery_system_part_2-01308d8.html?id=en%3Acustom_package_delivery_system_part_2" class="media" title="en:cdps2:custom_package_delivery_system_part_2-013.jpg"><img src="../../lib/exe/fetch.php/en/cdps2/custom_package_delivery_system_part_2-0133e6d.jpg_%3b?w=700&amp;tok=21920c" class="media" alt="" width="700" /></a>
</p>

<p>
I can configure how Services looks on printer Ticket by creating a Section for [SERVICES] at the end of the template. We&#039;ll print Calculation Template Name and Calculation Amount.
</p>

<p>
This is how it looks.
</p>

<p>
<a href="../../lib/exe/detail.php/en/cdps2/custom_package_delivery_system_part_2-01408d8.html?id=en%3Acustom_package_delivery_system_part_2" class="media" title="en:cdps2:custom_package_delivery_system_part_2-014.jpg"><img src="../../lib/exe/fetch.php/en/cdps2/custom_package_delivery_system_part_2-0146098.jpg_%3b?w=600&amp;tok=9e5f86" class="media" alt="" width="600" /></a>
</p>

<p>
Notes:
</p>
<!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;secid&quot;:2,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_center wrap_round wrap_tip plugin_wrap" style="width: 75%;">
<p>
You&#039;ll need at least V3.011 Beta version for this sample.
</p>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;secid&quot;:3,&quot;range&quot;:&quot;0-&quot;} --><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;secid&quot;:4,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_center wrap_round wrap_download plugin_wrap" style="width: 75%;">
<p>
Sample Database file <a href="https://sambapos.org/wiki/lib/exe/fetch.php/en/database/sambapos3-packages.sdf" class="media mediafile mf_sdf" title="en:database:sambapos3-packages.sdf (2.1 MB)">Download it.</a>
</p>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;secid&quot;:5,&quot;range&quot;:&quot;0-&quot;} -->
</div>
</div>
</body>

<!-- Mirrored from sambapos.org/wiki/doku.php/en/custom_package_delivery_system_part_2?do=export_xhtml by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 10 Jan 2019 04:50:27 GMT -->
</html>
